<!DOCTYPE html> <html lang="en"> <head> <meta http-equiv="Content-Type" content="text/html; charset=UTF-8"> <meta name="google-site-verification" content="XzAF_c-H6YDirAyvpFkA3tSd-5WNhmfJa3zVUY74Hfc"> <meta http-equiv="Permissions-Policy" content="interest-cohort=()"> <meta charset="utf-8"> <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"> <meta http-equiv="X-UA-Compatible" content="IE=edge"> <title> sdat2img &amp; img2sdat: Unpack Android .dat images | Andrei Conache </title> <meta name="author" content="Andrei Conache"> <meta name="description" content="Tools to convert sparse Android data image (.dat) into filesystem ext4 image (.img) and back"> <meta name="keywords" content="andrei, conache, xpirt"> <link rel="stylesheet" href="/assets/css/bootstrap.min.css?a4b3f509e79c54a512b890d73235ef04"> <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/mdbootstrap@4.20.0/css/mdb.min.css" integrity="sha256-jpjYvU3G3N6nrrBwXJoVEYI/0zw8htfFnhT9ljN3JJw=" crossorigin="anonymous"> <link defer rel="stylesheet" href="/assets/css/academicons.min.css?f0b7046b84e425c55f3463ac249818f5"> <link defer rel="stylesheet" href="/assets/css/scholar-icons.css?62b2ac103a88034e6882a5be5f3e2772"> <link defer rel="stylesheet" type="text/css" href="https://fonts.googleapis.com/css?family=Roboto:300,400,500,700|Roboto+Slab:100,300,400,500,700|Material+Icons&amp;display=swap"> <link defer rel="stylesheet" href="/assets/css/jekyll-pygments-themes-github.css?591dab5a4e56573bf4ef7fd332894c99" media="" id="highlight_theme_light"> <link rel="shortcut icon" href="/assets/img/avatar.jpg?ec809a9f6e18c7c8c09c39ff49ff80c2"> <link rel="stylesheet" href="/assets/css/main.css?d41d8cd98f00b204e9800998ecf8427e"> <link rel="canonical" href="https://xpirt.github.io/blog/2019/sdat2img-img2sdat/"> <script src="/assets/js/theme.js?7189403b31b2b3d66834c41bce0bf483"></script> </head> <body class="fixed-top-nav "> <header> <nav id="navbar" class="navbar navbar-light navbar-expand-sm fixed-top" role="navigation"> <div class="container"> <a class="navbar-brand title font-weight-lighter" href="/"> <span class="font-weight-bold">Andrei</span> Conache </a> <button class="navbar-toggler collapsed ml-auto" type="button" data-toggle="collapse" data-target="#navbarNav" aria-controls="navbarNav" aria-expanded="false" aria-label="Toggle navigation"> <span class="sr-only">Toggle navigation</span> <span class="icon-bar top-bar"></span> <span class="icon-bar middle-bar"></span> <span class="icon-bar bottom-bar"></span> </button> <div class="collapse navbar-collapse text-right" id="navbarNav"> <ul class="navbar-nav ml-auto flex-nowrap"> <li class="nav-item "> <a class="nav-link" href="/">about </a> </li> <li class="nav-item active"> <a class="nav-link" href="/blog/">blog </a> </li> <li class="nav-item "> <a class="nav-link" href="/repositories/">repositories </a> </li> </ul> </div> </div> </nav> <progress id="progress" value="0"> <div class="progress-container"> <span class="progress-bar"></span> </div> </progress> </header> <div class="container mt-5" role="main"> <div class="post"> <header class="post-header"> <h1 class="post-title">sdat2img &amp; img2sdat: Unpack Android .dat images</h1> <p class="post-meta"> Created in February 14, 2019 </p> <p class="post-tags"> <a href="/blog/2019"> <i class="fa-solid fa-calendar fa-sm"></i> 2019 </a>   ·   <a href="/blog/tag/sdat2img"> <i class="fa-solid fa-hashtag fa-sm"></i> sdat2img</a>   <a href="/blog/tag/img2sdat"> <i class="fa-solid fa-hashtag fa-sm"></i> img2sdat</a>   <a href="/blog/tag/android"> <i class="fa-solid fa-hashtag fa-sm"></i> android</a> </p> </header> <article class="post-content"> <div id="markdown-content"> <p>From Android 5.0 and later, all compiled system images (OEM’s, AOSP, LineageOS, etc) are not compressed anymore the way they used to be, because of their increasing size. The new systems are now packed within custom proprietary .DAT files. The question is: how to decompress them? These tools will help you get started!</p> <p>For more information about the usage of these tools and tutorials, visit my <a href="https://forum.xda-developers.com/android/software-hacking/how-to-conver-lollipop-dat-files-to-t2978952" rel="external nofollow noopener" target="_blank">XDA-Developers post</a>.</p> <h2 id="sdat2img-binary">sdat2img binary</h2> <p>This tool allows you to convert sparse Android data image (.dat) into filesystem ext4 image (.img). It requires Python 2.7 or newer installed on your system. It currently supports Windows, Linux, MacOS &amp; ARM architectures.</p> <p><strong>Note</strong>: newer Google’s <a href="https://github.com/google/brotli" rel="external nofollow noopener" target="_blank">Brotli</a> format (system.new.dat.br) must be decompressed to a valid sparse data image before using <code class="language-plaintext highlighter-rouge">sdat2img</code> binary.</p> <h3 id="usage">Usage</h3> <div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>sdat2img.py &lt;transfer_list&gt; &lt;system_new_file&gt; <span class="o">[</span>system_img]
</code></pre></div></div> <ul> <li> <code class="language-plaintext highlighter-rouge">&lt;transfer_list&gt;</code> = input, system.transfer.list from rom zip</li> <li> <code class="language-plaintext highlighter-rouge">&lt;system_new_file&gt;</code> = input, system.new.dat from rom zip</li> <li> <code class="language-plaintext highlighter-rouge">[system_img]</code> = output ext4 raw image file (optional)</li> </ul> <p>Repo: <a href="https://github.com/xpirt/sdat2img" rel="external nofollow noopener" target="_blank">https://github.com/xpirt/sdat2img</a></p> <p>Source code: <a href="https://github.com/xpirt/sdat2img/blob/master/sdat2img.py" rel="external nofollow noopener" target="_blank">https://github.com/xpirt/sdat2img/blob/master/sdat2img.py</a></p> <p>Changelog: <a href="https://github.com/xpirt/sdat2img/commits/master" rel="external nofollow noopener" target="_blank">https://github.com/xpirt/sdat2img/commits/master</a></p> <h2 id="img2sdat-binary">img2sdat binary</h2> <p>This tool allows you to convert back from filesystem ext4 image (.img) to Android sparse data image (.dat). It requires Python 2.7 or newer installed on your system. It currently supports Windows x86/x64, Linux x86/x64 &amp; arm/arm64 architectures.</p> <h3 id="usage-1">Usage</h3> <div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>img2sdat.py &lt;system_img&gt; <span class="o">[</span><span class="nt">-o</span> outdir] <span class="o">[</span><span class="nt">-v</span> version] <span class="o">[</span><span class="nt">-p</span> prefix]
</code></pre></div></div> <ul> <li> <code class="language-plaintext highlighter-rouge">&lt;system_img&gt;</code> = input system image</li> <li> <code class="language-plaintext highlighter-rouge">[-o outdir]</code> = output directory (current directory by default)</li> <li> <code class="language-plaintext highlighter-rouge">[-v version]</code> = transfer list version number (1 – 5.0, 2 – 5.1, 3 – 6.0, 4 – 7.0, will be asked by default, more info on xda thread)</li> <li> <code class="language-plaintext highlighter-rouge">[-p prefix]</code> = name of image (prefix.new.dat)</li> </ul> <p>Repo: <a href="https://github.com/xpirt/img2sdat" rel="external nofollow noopener" target="_blank">https://github.com/xpirt/img2sdat</a></p> <p>Source code: <a href="https://github.com/xpirt/img2sdat/blob/master/img2sdat.py" rel="external nofollow noopener" target="_blank">https://github.com/xpirt/img2sdat/blob/master/img2sdat.py</a></p> <p>Changelog: <a href="https://github.com/xpirt/img2sdat/commits/master" rel="external nofollow noopener" target="_blank">https://github.com/xpirt/img2sdat/commits/master</a></p> <h2 id="credits">Credits</h2> <p>These two binaries were not possible without the initial help and work by <a href="http://weibo.com/howellzhu" rel="external nofollow noopener" target="_blank">howellzhu</a> and <a href="https://github.com/luxi78" rel="external nofollow noopener" target="_blank">luxi78</a>.</p> </div> </article> <br> <hr> <br> <ul class="list-disc pl-8"></ul> <h2 class="text-3xl font-semibold mb-4 mt-12">Enjoy Reading This Article?</h2> <p class="mb-2">Here are some more articles you might like to read next:</p> <li class="my-2"> <a class="text-pink-700 underline font-semibold hover:text-pink-800" href="/blog/2019/j2store-sql-injection/">J2Store plugin 3.3.6 – SQL Injection (CVE-2019-9184)</a> </li> </div> </div> <footer class="fixed-bottom" role="contentinfo"> <div class="container mt-0"> © Copyright 2025 Andrei Conache </div> </footer> <script src="https://cdn.jsdelivr.net/npm/jquery@3.6.0/dist/jquery.min.js" integrity="sha256-/xUj+3OJU5yExlq6GSYGSHk7tPXikynS7ogEvDej/m4=" crossorigin="anonymous"></script> <script src="/assets/js/bootstrap.bundle.min.js"></script> <script src="https://cdn.jsdelivr.net/npm/mdbootstrap@4.20.0/js/mdb.min.js" integrity="sha256-NdbiivsvWt7VYCt6hYNT3h/th9vSTL4EDWeGs5SN3DA=" crossorigin="anonymous"></script> <script defer src="https://cdn.jsdelivr.net/npm/masonry-layout@4.2.2/dist/masonry.pkgd.min.js" integrity="sha256-Nn1q/fx0H7SNLZMQ5Hw5JLaTRZp0yILA/FRexe19VdI=" crossorigin="anonymous"></script> <script defer src="https://cdn.jsdelivr.net/npm/imagesloaded@5.0.0/imagesloaded.pkgd.min.js" integrity="sha256-htrLFfZJ6v5udOG+3kNLINIKh2gvoKqwEhHYfTTMICc=" crossorigin="anonymous"></script> <script defer src="/assets/js/masonry.js?a0db7e5d5c70cc3252b3138b0c91dcaf" type="text/javascript"></script> <script defer src="https://cdn.jsdelivr.net/npm/medium-zoom@1.1.0/dist/medium-zoom.min.js" integrity="sha256-ZgMyDAIYDYGxbcpJcfUnYwNevG/xi9OHKaR/8GK+jWc=" crossorigin="anonymous"></script> <script defer src="/assets/js/zoom.js?85ddb88934d28b74e78031fd54cf8308"></script> <script src="/assets/js/no_defer.js?fe550f970cf7f2c50b8489735038485b"></script> <script defer src="/assets/js/common.js?e0514a05c5c95ac1a93a8dfd5249b92e"></script> <script defer src="/assets/js/copy_code.js?12775fdf7f95e901d7119054556e495f" type="text/javascript"></script> <script defer src="/assets/js/jupyter_new_tab.js?d9f17b6adc2311cbabd747f4538bb15f"></script> <script defer type="text/javascript" id="MathJax-script" src="https://cdn.jsdelivr.net/npm/mathjax@3.2.2/es5/tex-mml-chtml.js" integrity="sha256-MASABpB4tYktI2Oitl4t+78w/lyA+D7b/s9GEP0JOGI=" crossorigin="anonymous"></script> <script src="/assets/js/mathjax-setup.js?a5bb4e6a542c546dd929b24b8b236dfd"></script> <script defer src="https://cdnjs.cloudflare.com/polyfill/v3/polyfill.min.js?features=es6" crossorigin="anonymous"></script> <script async src="https://www.googletagmanager.com/gtag/js?id=G-DB50YDDCYQ"></script> <script defer src="/assets/js/google-analytics-setup.js?12374742c4b1801ba82226e617af7e2d"></script> <script defer src="/assets/js/progress-bar.js?2f30e0e6801ea8f5036fa66e1ab0a71a" type="text/javascript"></script> <script src="/assets/js/vanilla-back-to-top.min.js?f40d453793ff4f64e238e420181a1d17"></script> <script>
    addBackToTop();
  </script> </body> </html>